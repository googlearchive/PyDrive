

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OAuth made easy &mdash; PyDrive 1.3.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PyDrive 1.3.1 documentation" href="index.html"/>
        <link rel="next" title="File management made easy" href="filemanagement.html"/>
        <link rel="prev" title="Quickstart" href="quickstart.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PyDrive
          

          
          </a>

          
            
            
              <div class="version">
                1.3.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">OAuth made easy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#authentication-in-two-lines">Authentication in two lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#automatic-and-custom-authentication-with-settings-yaml">Automatic and custom authentication with <em>settings.yaml</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sample-settings-yaml">Sample <em>settings.yaml</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-your-own-authentication-flow">Building your own authentication flow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="filemanagement.html">File management made easy</a></li>
<li class="toctree-l1"><a class="reference internal" href="filelist.html">File listing made easy</a></li>
<li class="toctree-l1"><a class="reference internal" href="pydrive.html">pydrive package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">PyDrive</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>OAuth made easy</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/oauth.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="oauth-made-easy">
<h1>OAuth made easy<a class="headerlink" href="#oauth-made-easy" title="Permalink to this headline">¶</a></h1>
<div class="section" id="authentication-in-two-lines">
<h2>Authentication in two lines<a class="headerlink" href="#authentication-in-two-lines" title="Permalink to this headline">¶</a></h2>
<p>OAuth2.0 is complex and difficult to start with. To make it more simple,
<em>PyDrive</em> makes all authentication into just two lines.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pydrive.auth</span> <span class="kn">import</span> <span class="n">GoogleAuth</span>

<span class="n">gauth</span> <span class="o">=</span> <span class="n">GoogleAuth</span><span class="p">()</span>
<span class="c1"># Create local webserver and auto handles authentication.</span>
<span class="n">gauth</span><span class="o">.</span><span class="n">LocalWebserverAuth</span><span class="p">()</span>

<span class="c1"># Or use the CommandLineAuth(), which provides you with a link to paste</span>
<span class="c1"># into your browser. The site it leads to then provides you with an</span>
<span class="c1"># authentication token which you paste into the command line.</span>
<span class="c1"># Commented out as it is an alternative to the LocalWebserverAuth() above,</span>
<span class="c1"># and someone will just copy-paste the entire thing into their editor.</span>

<span class="c1"># gauth.CommandLineAuth()</span>
</pre></div>
</div>
<p>To make this code work, you need to download the application configurations file
from APIs Console. Take a look at <a class="reference external" href="./quickstart.html#authentication">quickstart</a> for detailed instructions.</p>
<p><a class="reference external" href="./pydrive.html#pydrive.auth.GoogleAuth.LocalWebserverAuth">LocalWebserverAuth()</a> is a built-in method of <a class="reference external" href="./pydrive.html#pydrive.auth.GoogleAuth">GoogleAuth</a> which sets up
local webserver to automatically receive authentication code from user and
authorizes by itself. You can also use <a class="reference external" href="./pydrive.html#pydrive.auth.GoogleAuth.CommandLineAuth">CommandLineAuth()</a> which manually
takes code from user at command line.</p>
</div>
<div class="section" id="automatic-and-custom-authentication-with-settings-yaml">
<h2>Automatic and custom authentication with <em>settings.yaml</em><a class="headerlink" href="#automatic-and-custom-authentication-with-settings-yaml" title="Permalink to this headline">¶</a></h2>
<p>Read this section if you need a custom authentication flow, <strong>such as silent
authentication on a remote machine</strong>. For an example of such a setup have a look
at <a class="reference internal" href="#sample-settings-yaml">Sample settings.yaml</a>.</p>
<p>OAuth is complicated and it requires a lot of settings. By default,
when you don&#8217;t provide any settings, <em>PyDrive</em> will automatically set default
values which works for most of the cases. Here are some default settings.</p>
<ul class="simple">
<li>Read client configuration from file <em>client_secrets.json</em></li>
<li>OAuth scope: <code class="code docutils literal"><span class="pre">https://www.googleapis.com/auth/drive</span></code></li>
<li>Don&#8217;t save credentials</li>
<li>Don&#8217;t retrieve refresh token</li>
</ul>
<p>However, you might want to customize these settings while maintaining two lines
of clean code. If that is the case, you can make <em>settings.yaml</em> file in your
working directory and <em>PyDrive</em> will read it to customize authentication
behavior.</p>
<p>These are all the possible fields of a <em>settings.yaml</em> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">client_config_backend</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
<span class="n">client_config_file</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
<span class="n">client_config</span><span class="p">:</span>
  <span class="n">client_id</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">client_secret</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">auth_uri</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">token_uri</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">redirect_uri</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">revoke_uri</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>

<span class="n">save_credentials</span><span class="p">:</span> <span class="p">{{</span><span class="nb">bool</span><span class="p">}}</span>
<span class="n">save_credentials_backend</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
<span class="n">save_credentials_file</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>

<span class="n">get_refresh_token</span><span class="p">:</span> <span class="p">{{</span><span class="nb">bool</span><span class="p">}}</span>

<span class="n">oauth_scope</span><span class="p">:</span> <span class="p">{{</span><span class="nb">list</span> <span class="n">of</span> <span class="nb">str</span><span class="p">}}</span>
</pre></div>
</div>
<p>Fields explained:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">client_config_backend (str):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">From where to read client configuration(API application settings such as client_id and client_secrets) from. Valid values are &#8216;file&#8217; and &#8216;settings&#8217;. <strong>Default</strong>: &#8216;file&#8217;. <strong>Required</strong>: No.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">client_config_file (str):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">When <em>client_config_backend</em> is &#8216;file&#8217;, path to the file containing client configuration. <strong>Default</strong>: &#8216;client_secrets.json&#8217;. <strong>Required</strong>: No.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">client_config (dict):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Place holding dictionary for client configuration when <em>client_config_backend</em> is &#8216;settings&#8217;. <strong>Required</strong>: Yes, only if <em>client_config_backend</em> is &#8216;settings&#8217;</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">client_config[&#8216;client_id&#8217;] (str):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Client ID of the application. <strong>Required</strong>: Yes, only if <em>client_config_backend</em> is &#8216;settings&#8217;</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">client_config[&#8216;client_secret&#8217;] (str):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Client secret of the application. <strong>Required</strong>: Yes, only if <em>client_config_backend</em> is &#8216;settings&#8217;</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">client_config[&#8216;auth_uri&#8217;] (str):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">The authorization server endpoint URI. <strong>Default</strong>: &#8216;<a class="reference external" href="https://accounts.google.com/o/oauth2/auth">https://accounts.google.com/o/oauth2/auth</a>&#8216;. <strong>Required</strong>: No.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">client_config[&#8216;token_uri&#8217;] (str):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The token server endpoint URI. <strong>Default</strong>: &#8216;<a class="reference external" href="https://accounts.google.com/o/oauth2/token">https://accounts.google.com/o/oauth2/token</a>&#8216;. <strong>Required</strong>: No.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">client_config[&#8216;redirect_uri&#8217;] (str):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Redirection endpoint URI. <strong>Default</strong>: &#8216;<a class="reference external" href="urn:ietf:wg:oauth:2.0:oob">urn:ietf:wg:oauth:2.0:oob</a>&#8216;. <strong>Required</strong>: No.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">client_config[&#8216;revoke_uri&#8217;] (str):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Revoke endpoint URI. <strong>Default</strong>: None. <strong>Required</strong>: No.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">save_credentials (bool):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">True if you want to save credentials. <strong>Default</strong>: False. <strong>Required</strong>: No.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">save_credentials_backend (str):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Backend to save credentials to. &#8216;file&#8217; is the only valid value for now. <strong>Default</strong>: &#8216;file&#8217;. <strong>Required</strong>: No.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">save_credentials_file (str):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Destination of credentials file. <strong>Required</strong>: Yes, only if <em>save_credentials_backend</em> is &#8216;file&#8217;.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_refresh_token (bool):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">True if you want to retrieve refresh token along with access token. <strong>Default</strong>: False. <strong>Required</strong>: No.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">oauth_scope (list of str):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">OAuth scope to authenticate. <strong>Default</strong>: [&#8216;<a class="reference external" href="https://www.googleapis.com/auth/drive">https://www.googleapis.com/auth/drive</a>&#8216;]. <strong>Required</strong>: No.</td>
</tr>
</tbody>
</table>
<div class="section" id="sample-settings-yaml">
<h3>Sample <em>settings.yaml</em><a class="headerlink" href="#sample-settings-yaml" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">client_config_backend</span><span class="p">:</span> <span class="n">settings</span>
<span class="n">client_config</span><span class="p">:</span>
  <span class="n">client_id</span><span class="p">:</span> <span class="mf">9637341109347.</span><span class="n">apps</span><span class="o">.</span><span class="n">googleusercontent</span><span class="o">.</span><span class="n">com</span>
  <span class="n">client_secret</span><span class="p">:</span> <span class="n">psDskOoWr1P602PXRTHi</span>

<span class="n">save_credentials</span><span class="p">:</span> <span class="kc">True</span>
<span class="n">save_credentials_backend</span><span class="p">:</span> <span class="n">file</span>
<span class="n">save_credentials_file</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">json</span>

<span class="n">get_refresh_token</span><span class="p">:</span> <span class="kc">True</span>

<span class="n">oauth_scope</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">drive</span><span class="o">.</span><span class="n">file</span>
  <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">drive</span><span class="o">.</span><span class="n">install</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="building-your-own-authentication-flow">
<h2>Building your own authentication flow<a class="headerlink" href="#building-your-own-authentication-flow" title="Permalink to this headline">¶</a></h2>
<p>You might want to build your own authentication flow. For example, you might
want to integrate your existing website with Drive API. In that case, you can
customize authentication flow as follwing:</p>
<ol class="arabic simple">
<li>Get authentication Url from <a class="reference external" href="./pydrive.html#pydrive.auth.GoogleAuth.GetAuthUrl">GetAuthUrl()</a>.</li>
<li>Ask users to visit the authentication Url and grant access to your application. Retrieve authentication code manually by user or automatically by building your own oauth2callback.</li>
<li>Call <a class="reference external" href="./pydrive.html#pydrive.auth.GoogleAuth.Auth">Auth(code)</a> with the authentication code you retrieved from step 2.</li>
</ol>
<p>Your <em>settings.yaml</em> will work for your customized authentication flow, too.</p>
<p>Here is a sample code for your customized authentication flow</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pydrive.auth</span> <span class="kn">import</span> <span class="n">GoogleAuth</span>

<span class="n">gauth</span> <span class="o">=</span> <span class="n">GoogleAuth</span><span class="p">()</span>
<span class="n">auth_url</span> <span class="o">=</span> <span class="n">gauth</span><span class="o">.</span><span class="n">GetAuthUrl</span><span class="p">()</span> <span class="c1"># Create authentication url user needs to visit</span>
<span class="n">code</span> <span class="o">=</span> <span class="n">AskUserToVisitLinkAndGiveCode</span><span class="p">(</span><span class="n">auth_url</span><span class="p">)</span> <span class="c1"># Your customized authentication flow</span>
<span class="n">gauth</span><span class="o">.</span><span class="n">Auth</span><span class="p">(</span><span class="n">code</span><span class="p">)</span> <span class="c1"># Authorize and build service from the code</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="filemanagement.html" class="btn btn-neutral float-right" title="File management made easy" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral" title="Quickstart" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, JunYoung Gwak, Scott Blevins, Robin Nabel, Google Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.3.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>